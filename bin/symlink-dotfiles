#!/usr/bin/env bash
set -e
source "$DOTFILES_PATH/lib/color.bash"

echo 'Installing dotfiles ...'
for FILE in "$DOTFILES_PATH/dotfiles/".*; do
    NAME=$(basename $FILE)

    # Skip special directories ...
    if [[ "." == $NAME || ".." == $NAME ]]; then
        continue
    elif [ -L "$HOME/$NAME" ]; then
        rm -f "$HOME/$NAME"
        ln -s $FILE "$HOME/$NAME"
        echo "  $(color-lime)>>> $(color-dark-grey)Updated symlink $(color-grey)$NAME$(color-dark-grey) to $(color-grey)$FILE"
    elif [ -e "$HOME/$NAME" ]; then
        echo "  $(color-maroon)!!! $(color-dark-grey)Not updating $(color-grey)$NAME$(color-dark-grey), it is not a symlink."
    else
        ln -s $FILE "$HOME/$NAME"
        echo "  $(color-lime)>>> $(color-dark-grey)Created symlink $(color-grey)$NAME$(color-dark-grey) to $(color-grey)$FILE"
    fi
done

color-reset
